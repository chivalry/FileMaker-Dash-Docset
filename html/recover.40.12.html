<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="description" content="Use the following table to help you determine how to recover or check the consistency of a file you suspect is damaged." />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Troubleshooting file recovery</title>
    <!-- MLP 012913 remove chapter specific css
    <link wwpage:condition="catalog-css" rel="StyleSheet" href="css/catalog.css" wwpage:attribute-href="catalog-css" type="text/css" media="all" />
	 -->
    <link rel="StyleSheet" href="../css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="../css/print.css" type="text/css" media="print" />
    <!--[if lt IE 7]>
     <link rel="StyleSheet" href="../css/ie6.css" type="text/css" media="all" />
    <![endif]-->
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "../";
      // -->
    </script>
  </head>
  <body class="" style="">
    <div id="navbar">
      <a class="navleft" href="../index.html"><span class="navimg">FileMaker Pro 13 Help</span></a>
      <div class="navmarginright"></div>
      <a class="navright" href="toc.html">Contents</a>
      <a class="navright" href="error_codes.html"><span>Next</span> &gt;</a>
      <a class="navright" href="recover.40.11.html">&lt; <span>Previous</span></a>
    </div>
    <p id="breadcrumb">
      <a href="../index.html">Home</a> &gt; 
      <a href="part5.html#1033097">Reference</a> &gt; 
      <a href="recover.40.1.html#1033097">Maintaining and recovering FileMaker Pro databases</a> &gt; 
      <b>Troubleshooting file recovery</b>
    </p>
    <blockquote class="content-fmi">
      <div class="h3-head3">Troubleshooting file recovery</div>
      <div class="b-body"><a name="1033098">Use the following table to help you determine how to recover or check the consistency of a file you suspect is damaged.</a></div>
      <div class="b-body"><a name="1033163"> </a></div>
      <table class="t1-table1" style="text-align: left;" summary="">
        <caption></caption>
        <tr>
          <td style="background-color: #666666; background-image: url(&quot;images\tablebg.gif&quot;); background-repeat: repeat-x; padding-left: .4em; padding-right: .4em; vertical-align: bottom;">
            <div class="th-tablehead"><a name="1033101">Problem</a></div>
          </td>
          <td style="background-color: #666666; background-image: url(&quot;images\tablebg.gif&quot;); background-repeat: repeat-x; padding-left: .4em; padding-right: .4em; vertical-align: bottom;">
            <div class="th-tablehead"><a name="1033103">Solution</a></div>
          </td>
        </tr>
        <tr>
          <td style="padding-left: .4em; padding-right: .4em; vertical-align: top;">
            <div class="b-body"><a name="1033105">Performing a find returns more records than you expected, or the find returns fewer records than it should. (For example, the found set includes records that once contained the word or value being searched but doesn’t any longer, or the found set doesn’t include a record you just added with the word or value being searched.)</a></div>
          </td>
          <td style="padding-left: .4em; padding-right: .4em; vertical-align: top;">
            <div class="b-body"><a name="1033107">The indexes for the search field (the field containing the value being searched) have become out of sync with the data. If the problem occurs only when searching on one field, use the Manage Database dialog box to turn off the field index, then save the changes, and then turn on the field index again. To do this:</a></div>
            <div class="s1f-step1first_outer" style="margin-left: 0em;">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="s1f-step1first_inner" style="width: 1.5em; white-space: nowrap;">
                      <span class="zan-autonum">1.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="s1f-step1first_inner"><a name="1033108">With the database open, choose </a><span class="o-onscreen">File</span> menu &gt; <span class="o-onscreen">Manage</span> &gt; <span class="o-onscreen">Database</span>.</div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="s1r-step1reg_outer" style="margin-left: 0em;">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="s1r-step1reg_inner" style="width: 1.5em; white-space: nowrap;">
                      <span class="zan-autonum">2.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="s1r-step1reg_inner"><a name="1033109">In the Manage Database dialog box, click the </a><span class="o-onscreen">Fields</span> tab, and double-click the indexed field.</div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="s1r-step1reg_outer" style="margin-left: 0em;">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="s1r-step1reg_inner" style="width: 1.5em; white-space: nowrap;">
                      <span class="zan-autonum">3.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="s1r-step1reg_inner"><a name="1033110">In the Options for Field dialog box, click the </a><span class="o-onscreen">Storage</span> tab.</div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="s1r-step1reg_outer" style="margin-left: 0em;">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="s1r-step1reg_inner" style="width: 1.5em; white-space: nowrap;">
                      <span class="zan-autonum">4.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="s1r-step1reg_inner"><a name="1033689">Remove the index by selecting </a><span class="o-onscreen">Indexing: None</span>. Then click <span class="o-onscreen">OK</span>.</div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="s1r-step1reg_outer" style="margin-left: 0em;">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="s1r-step1reg_inner" style="width: 1.5em; white-space: nowrap;">
                      <span class="zan-autonum">5.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="s1r-step1reg_inner"><a name="1033112">In the Manage Database dialog box, double-click the same field. In the Options for Field dialog box, click the </a><span class="o-onscreen">Storage</span> tab.</div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="s1r-step1reg_outer" style="margin-left: 0em;">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="s1r-step1reg_inner" style="width: 1.5em; white-space: nowrap;">
                      <span class="zan-autonum">6.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="s1r-step1reg_inner"><a name="1033113">Place the index back on for that field by selecting </a><span class="o-onscreen">Indexing: All</span>. Click <span class="o-onscreen">OK</span>.</div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="s1r-step1reg_outer" style="margin-left: 0em;">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="s1r-step1reg_inner" style="width: 1.5em; white-space: nowrap;">
                      <span class="zan-autonum">7.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="s1r-step1reg_inner"><a name="1033114">Click </a><span class="o-onscreen">OK</span> to close the Manage Database dialog box.</div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="s1r-step1reg_outer" style="margin-left: 0em;">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="s1r-step1reg_inner" style="width: 1.5em; white-space: nowrap;">
                      <span class="zan-autonum">8.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="s1r-step1reg_inner"><a name="1033115">Test the file.</a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="b-body"><a name="1033116">If more than one index appears to have a problem, in the Advanced Recovery Options dialog box, select </a><span class="o-onscreen">Copy file blocks as-is</span> and <span class="e-emphasis">only</span> <span class="o-onscreen">Rebuild indexes</span> / <span class="o-onscreen">Now</span>. This combination of options creates a new database that is a copy of the old one with all the field indexes rebuilt.</div>
            <div class="b-body"><a name="1033117">For more information, search the FileMaker Knowledge Base available at </a><span class="h-hyperlink"><a href="http://help.filemaker.com" target="external_window">http://help.filemaker.com</a></span>.</div>
          </td>
        </tr>
        <tr>
          <td style="background-color: #E6EDFF; padding-left: .4em; padding-right: .4em; vertical-align: top;">
            <div class="b-body"><a name="1033120">FileMaker Pro crashes or hangs when opening a file that displays a layout containing a corrupted graphic. The layout can't be avoided because of an On Open script or because the Switch to Layout option (in the File Options dialog box) is selected.</a></div>
          </td>
          <td style="background-color: #E6EDFF; padding-left: .4em; padding-right: .4em; vertical-align: top;">
            <div class="b-body"><a name="1033122">Try opening the file from a different file (which you can do if the file contains a script that switches to a layout other than the opening layout) and then deleting the corrupted layout. To do this:</a></div>
            <div class="s1f-step1first_outer" style="margin-left: 0em;">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="s1f-step1first_inner" style="width: 1.5em; white-space: nowrap;">
                      <span class="zan-autonum">1.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="s1f-step1first_inner"><a name="1033123">Open another FileMaker file or create a new one. </a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="s1r-step1reg_outer" style="margin-left: 0em;">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="s1r-step1reg_inner" style="width: 1.5em; white-space: nowrap;">
                      <span class="zan-autonum">2.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="s1r-step1reg_inner"><a name="1033124">Define a script with the following step: </a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="b1-body1"><span class="c-code"><a name="1033125">Perform Script [ "Script" from file:: "Badfile"]</a></span></div>
            <div class="b1-body1"><a name="1033126">(Badfile is the name of the unopenable file and Script is a script within the unopenable file that switches to any layout but the opening layout.) </a></div>
            <div class="s1r-step1reg_outer" style="margin-left: 0em;">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="s1r-step1reg_inner" style="width: 1.5em; white-space: nowrap;">
                      <span class="zan-autonum">3.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="s1r-step1reg_inner"><a name="1033127">Perform the script.</a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="s1r-step1reg_outer" style="margin-left: 0em;">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="s1r-step1reg_inner" style="width: 1.5em; white-space: nowrap;">
                      <span class="zan-autonum">4.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="s1r-step1reg_inner"><a name="1033128">In another layout, switch to Layout mode.</a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="s1r-step1reg_outer" style="margin-left: 0em;">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="s1r-step1reg_inner" style="width: 1.5em; white-space: nowrap;">
                      <span class="zan-autonum">5.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="s1r-step1reg_inner"><a name="1033129">Scroll the window to the bottom of the screen or to the right edge of the screen beyond the position where objects would be visible on the damaged layout.</a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="s1r-step1reg_outer" style="margin-left: 0em;">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="s1r-step1reg_inner" style="width: 1.5em; white-space: nowrap;">
                      <span class="zan-autonum">6.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="s1r-step1reg_inner"><a name="1033130">Switch to the damaged layout. </a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="b1-body1"><a name="1033131">Because the corrupted objects are off-screen, the computer should not hang.</a></div>
            <div class="s1r-step1reg_outer" style="margin-left: 0em;">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="s1r-step1reg_inner" style="width: 1.5em; white-space: nowrap;">
                      <span class="zan-autonum">7.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="s1r-step1reg_inner"><a name="1033132">Delete this layout.</a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="b-body"><a name="1033133">If the problem persists, recover the file using the Advanced Recovery Options dialog box. Select </a><span class="o-onscreen">Copy file blocks as-is</span> and <span class="e-emphasis">only</span> <span class="o-onscreen">Bypass startup script and layout</span>. This combination of options creates a new database that is a copy of the old one. When FileMaker Pro opens, it switches to a new blank layout, and the On Open script option is disabled.</div>
            <div class="b-body"><a name="1033134">For more information, search the FileMaker Knowledge Base available at </a><span class="h-hyperlink"><a href="http://help.filemaker.com" target="external_window">http://help.filemaker.com</a></span>.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-left: .4em; padding-right: .4em; vertical-align: top;">
            <div class="b-body"><a name="1033137">Your computer crashed when you were making lots of changes to the layout and script structure of a database. The database is now reported as damaged.</a></div>
          </td>
          <td style="padding-left: .4em; padding-right: .4em; vertical-align: top;">
            <div class="b-body"><a name="1033139">If you were making significant changes to the layouts, scripts, or other database structure but were not changing the data, you may want to retrieve only the most recently modified layouts or scripts from the damaged file and then copy them to a good backup copy of the original file. </a></div>
            <div class="b-body"><a name="1033140">To do this, in the Advanced Recovery Options dialog box, select either </a><span class="o-onscreen">Copy logical structure</span> or <span class="o-onscreen">Scan blocks and rebuild file</span>. Then select <span class="e-emphasis">only</span> <span class="o-onscreen">Scan and rebuild scripts, layouts, etc. (structure)</span>.<span class="o-onscreen"> </span>This combination of options creates a new file and rebuilds the structure much faster than if all the fields and records also were scanned and rebuilt. Use the new file <span class="e-emphasis">only</span> to copy the minimum necessary scripts and layouts, and then paste them into a known good backup copy of the original file.</div>
          </td>
        </tr>
        <tr>
          <td style="background-color: #E6EDFF; padding-left: .4em; padding-right: .4em; vertical-align: top;">
            <div class="b-body"><a name="1033142">A database you tried to open is reported as damaged, and you want to try saving a compacted copy of the file.</a></div>
          </td>
          <td style="background-color: #E6EDFF; padding-left: .4em; padding-right: .4em; vertical-align: top;">
            <div class="b-body"><a name="1033144">In the Advanced Recovery Options dialog box, select </a><span class="o-onscreen">Copy logical structure</span>, but select none of the checkboxes. This option performs the exact same operation as saving a compacted copy of the database.</div>
            <div class="b-body"><a name="1033145">Because copying the logical structure does not scan the field data or structure, there could still be problems with the resulting file, so test that file carefully for signs of problems. Also consider performing a full recovery; that is, recover the file with </a><span class="o-onscreen">Use advanced options</span> deselected in the “Name new recovered file” dialog box, to see if problems are reported.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-left: .4em; padding-right: .4em; vertical-align: top;">
            <div class="b-body"><a name="1033147">You suspect there may be problems with your file, although the file is not reported as damaged.</a></div>
          </td>
          <td style="padding-left: .4em; padding-right: .4em; vertical-align: top;">
            <div class="b-body"><a name="1033149">Start by doing a file consistency check, to check the low-level block format of the file. (Click the </a><span class="o-onscreen">Check consistency</span> button in the Select Damaged File dialog box.) </div>
            <div class="b-body"><a name="1033150">If no problems are found, then recover the file with </a><span class="o-onscreen">Use advanced options </span>in the “Name new recovered file” dialog box deselected. If no problems are found while scanning the schema and structure, you can assume that the original file has no structural problems. </div>
            <div class="b-body"><a name="1033151">However, there is still a risk that the file contains corrupted data or graphics. If database users report that going to a particular layout or record causes their computer to hang or FileMaker Pro to crash, then data or graphics could be corrupted. In that case, locate and delete the problem layout or record. To do this:</a></div>
            <div class="s1f-step1first_outer" style="margin-left: 0em;">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="s1f-step1first_inner" style="width: 1.5em; white-space: nowrap;">
                      <span class="zan-autonum">1.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="s1f-step1first_inner"><a name="1033152">In another layout, switch to Layout mode.</a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="s1r-step1reg_outer" style="margin-left: 0em;">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="s1r-step1reg_inner" style="width: 1.5em; white-space: nowrap;">
                      <span class="zan-autonum">2.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="s1r-step1reg_inner"><a name="1033153">Scroll the window to the bottom of the screen or to the right edge of the screen beyond the position where objects would be visible on the damaged layout.</a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="s1r-step1reg_outer" style="margin-left: 0em;">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="s1r-step1reg_inner" style="width: 1.5em; white-space: nowrap;">
                      <span class="zan-autonum">3.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="s1r-step1reg_inner"><a name="1033154">Switch to the damaged layout. Because the corrupted objects are off-screen, the computer should not hang.</a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="s1r-step1reg_outer" style="margin-left: 0em;">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="s1r-step1reg_inner" style="width: 1.5em; white-space: nowrap;">
                      <span class="zan-autonum">4.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="s1r-step1reg_inner"><a name="1033155">Delete this layout.</a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="b-body"><a name="1033156">For more information, search the FileMaker Knowledge Base available at </a><span class="h-hyperlink"><a href="http://help.filemaker.com" target="external_window">http://help.filemaker.com</a></span>.</div>
          </td>
        </tr>
        <tr>
          <td style="background-color: #E6EDFF; padding-left: .4em; padding-right: .4em; vertical-align: top;">
            <div class="b-body"><a name="1033159">You want to recover a large file in the shortest possible amount of time while ensuring that everything important about recovering the file is performed.</a></div>
          </td>
          <td style="background-color: #E6EDFF; padding-left: .4em; padding-right: .4em; vertical-align: top;">
            <div class="b-body"><a name="1033161">In the Advanced Recovery Options dialog box, select </a><span class="o-onscreen">Scan blocks and rebuild file</span> and then select <span class="o-onscreen">Scan record data and rebuild fields and tables (schema)</span>, <span class="o-onscreen">Scan and rebuild scripts, layouts, etc. (structure)</span>, and <span class="o-onscreen">Rebuild field indexes</span> / <span class="o-onscreen">Later</span>. This combination of options scans and rebuilds the file schema and structure but deletes instead of rebuilds existing field indexes. File recovery will take less time, and the field indexes will be rebuilt later, as they are needed, during database use.</div>
            <div class="n-note">
              <span class="zan-autonum">Note  </span><a name="1033162">Deselecting </a><span class="o-onscreen">Delete cached settings </span>is unlikely to have much impact in shortening file recovery time.</div>
          </td>
        </tr>
      </table>
      <div class="b-body"><a name="1032757"> </a></div>
    </blockquote>
    <div class="feedbacklink">Was this topic helpful? <a href="http://www.filemaker.com/redirects/fmp13_admin.html?page=feedback&amp;lang=en" target="external_window">Send feedback.</a></div>
  </body>
</html>